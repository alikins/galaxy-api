openapi: "3.0.0"

info:
  version: 0.1.0
  title: Galaxy API
  license:
    name: Apache-2.0

paths:

# -------------------------------------
# Namespaces
# -------------------------------------
  '/namespaces/':
    get:
      summary: List namespaces
      operationId: listNamespaces
      tags:
        - Namespaces
      responses:
        '200':
          description: A paginated list of namespaces
        'default':
          $ref: '#/components/responses/Error'
    post:
      summary: Create a namespace
      tags:
        - Namespaces
      responses:
        '201':
          description: Namespace created successfully
        'default':
          $ref: '#/components/responses/Error'

  '/namespaces/{name}/':
    get:
      summary: Get Namespace
      operationId: getNamespace
      tags:
        - Namespaces
      responses:
        '200':
          description: The requested Namespace
        'default':
          $ref: '#/components/responses/Error'
    put:
      summary: Update Namespace
      operationId: updateNamespace
      tags:
        - Namespaces
      responses:
        '200':
          description: Namespace updated successfully
        'default':
          $ref: '#/components/responses/Error'
    delete:
      summary: Delete Namespace
      operationId: deleteNamespace
      tags:
        - Namespaces
      responses:
        '204':
          description: Namespace deleted successfully
        'default':
          $ref: '#/components/responses/Error'

# -------------------------------------
# Collections
# -------------------------------------
  '/collections/':
    get:
      summary: List Collections
      operationId: listCollections
      tags:
        - Collections
      responses:
        '200':
          description: A paginated list of collections
        'default':
          $ref: '#/components/responses/Error'
    post:
      summary: Upload Collection
      operationId: uploadCollection
      tags:
        - Collections

  '/collections/{namespace}/{name}/':
    get:
      summary: Get Collection
      operationId: getCollection
      tags:
        - Collections
      responses:
        '200':
          description: The requested Collection
        'default':
          $ref: '#/components/responses/Error'

    put:
      summary: Update Collection
      operationId: updateCollection
      tags:
        - Collections

  '/collections/{namespace}/{name}/versions/':
    get:
      summary: List Collection Versions
      operationId: listCollectionVersions
      tags:
        - Collections
      responses:
        '200':
          description: A paginated list of Collection Versions
        'default':
          $ref: '#/components/responses/Error'

  '/collections/{namespace}/{name}/versions/{version}/':
    get:
      summary: Get Collection Version
      operationId: getCollectionVersions
      tags:
        - Collections
      responses:
        '200':
          description: The requested Collection Version
        'default':
          $ref: '#/components/responses/Error'

  '/collections/{namespace}/{name}/versions/{version}/artifact/':
    get:
      summary: Get Collection Version
      operationId: getCollectionVersionArtifact
      tags:
        - Collections
      responses:
        '200':
          description: The requested Collection Version Artifact
        'default':
          $ref: '#/components/responses/Error'

# -------------------------------------
# Imports
# -------------------------------------
  '/imports/collections/':
    get:
      summary: List Collection Imports
      operationId: listCollectionImports
      tags:
        - Imports
      responses:
        '200':
          description: A paginated list of Collection Imports
        'default':
          $ref: '#/components/responses/Error'

  '/imports/collections/{id}/':
    get:
      summary: Get Collection Import
      operationId: getCollectionImport
      tags:
        - Imports
      responses:
        '200':
          description: The requested Collection Import
        'default':
          $ref: '#/components/responses/Error'

# -------------------------------------
# Downloads
# -------------------------------------
  '/downloads/collections/{filename}':
    get:
      summary: Download Collection Artifact
      operationId: downloadCollection
      tags:
        - Downloads

# -------------------------------------
# Search
# -------------------------------------
  '/search/collections/':
    get:
      summary: Search Collections
      operationId: searchCollections
      tags:
        - Search
      responses:
        '200':
          description: A paginated list of Collections
        'default':
          $ref: '#/components/responses/Error'

  '/search/tags/':
    get:
      summary: Search Tags
      operationId: searchTags
      tags:
        - Search
      responses:
        '200':
          description: A paginated list of Tags
        'default':
          $ref: '#/components/responses/Error'

# -------------------------------------
# Users
# -------------------------------------
  '/users/':
    get:
      summary: List Users
      operationId: listUsers
      tags:
        - Users
      responses:
        '200':
          description: A paginated list of Users
        'default':
          $ref: '#/components/responses/Error'


  '/users/{id}/':
    get:
      summary: Get User
      operationId: getUser
      tags:
        - Users
      responses:
        '200':
          description: The requested User
        'default':
          $ref: '#/components/responses/Error'


# -------------------------------------
# Profile
# -------------------------------------
  '/profile/':
    get:
      summary: Get Profile
      operationId: getProfile
      description: Returns information about the current User.
      tags:
        - Profile
      responses:
        '200':
          description: The current User
        'default':
          $ref: '#/components/responses/Error'

components:
  schemas:
    Error:
      title: 'Error'
      description: "A JSON API Error object"
      type: object
      externalDocs:
        description: 'JSON API Error Specification'
        url: 'https://jsonapi.org/format/#errors'
      properties:
        errors:
          type: array
          title: 'ErrorItems'
          items:
            $ref: '#/components/schemas/ErrorItem'
          minItems: 1
      required:
        - errors

    ErrorItem:
      title: 'ErrorItem'
      description: 'An item returned in the Error "errors" value'
      externalDocs:
        description: 'JSON API Error Specification'
        url: 'https://jsonapi.org/format/#errors'
      type: object
      properties:
        code:
          description: 'Unique identifier for the error'
          type: string
          example: 'not_found'
        detail:
          type: string
          description: 'Error detail'
          example: 'Record not found.'
        status:
          type: string
          description: 'String representation of HTTP status code'
          example: '404'
        source:
          type: object
          properties:
            parameter:
              description: 'A string indicating which URI query parameter caused the error.'
              type: string
            pointer:
              description: 'A JSON Pointer [RFC6901] to the associated entity in the request document '
              type: string
      required:
        - detail
        - status

  responses:
    Error:
      description: 'Error'
      content:
        application/vnd.api+json:
          schema:
            $ref: '#/components/schemas/Error'
